function router($routeProvider){$routeProvider.when("/",{controller:"rsvpCtrl"}).when("/list",{controller:"listRSVP"})}function rsvpCtrl($scope,fbURL,angularFire,angularFireCollection){$scope.attending=[],$scope.attending.adults=[""],$scope.attending.childrens=[],$scope.attending.diet="",$scope.num_adults=1,$scope.num_childrens=0,$scope.rsvp_id=null,console.log(fbURL);var ref=new Firebase(fbURL);$scope.attendings=[],angularFire(ref,$scope,"attendings"),console.log($scope.attendings,ref),$scope.$watch("num_adults",function(){var adult="";if($scope.num_adults>$scope.attending.adults.length)for(var add_more=$scope.num_adults-$scope.attending.adults.length,i=1;add_more>=i;i++)$scope.attending.adults.push(adult);else $scope.num_adults<$scope.attending.adults.length&&($scope.attending.adults=$scope.attending.adults.slice(0,$scope.num_adults))}),$scope.$watch("num_childrens",function(){var adult="";if($scope.num_childrens>$scope.attending.childrens.length)for(var add_more=$scope.num_childrens-$scope.attending.childrens.length,i=1;add_more>=i;i++)$scope.attending.childrens.push(adult);else $scope.num_childrens<$scope.attending.childrens.length&&($scope.attending.childrens=$scope.attending.childrens.slice(0,$scope.num_childrens))}),$scope.respond=function(){var adults=[];$(".adult").each(function(){adults.push($(this).val())});var children=[];$(".child").each(function(){children.push($(this).val())}),$scope.attending.adults=adults,$scope.attending.childrens=children,ref.push($scope.attending),$scope.rsvp_id=!0},$scope.add_rsvp=function(){var service=angularFireCollection(new Firebase(fbURL)),result=service.add($scope.attending);service.push($scope.attending);var result=service.add($scope.attending,function(){console.log($scope.attending),console.log(result),$scope.rsvp_id=result.name()})},$scope.remove_rsvp=function(){var service=new Firebase(new Firebase(fbURL+"-J2DOPyqBo7Jk9g1pRhj"));service.remove()},$scope.reset_rsvp=function(){$scope.attending=[],$scope.attending.adults=[""],$scope.attending.childrens=[],$scope.attending.diet="",$scope.num_adults=1,$scope.num_childrens=0,$scope.rsvp_id=null},$scope.load_existing=function(){$scope.rsvp_id&&angularFireCollection(fbURL+$scope.rsvp_id)},$scope.load_existing($scope.rsvp_id)}function listRSVP($scope,angularFire,fbURL,angularFireCollection){$scope.server_attending=angularFireCollection(fbURL),console.log($scope.server_attending)}angular.module("site",["firebase"]).value("fbURL","https://steph-wedding.firebaseio.com/attending/").config(router),!function($){$(function(){var $root=$("html, body");$("#nav a").click(function(){$("#nav a").parent().removeClass("active"),$(this).parent().addClass("active");var href=$.attr(this,"href");return $root.animate({scrollTop:$(href).offset().top},500,function(){window.location.hash=href}),!1}),$(document).on("keydown","#rsvp_form",function(e){13==e.keyCode&&e.preventDefault()});var t1=new Date("April 20, 2014 09:00:00"),t2=new Date,dif=t1.getTime()-t2.getTime(),Seconds_from_T1_to_T2=dif/1e3;$(".clock").FlipClock(Seconds_from_T1_to_T2,{clockFace:"DailyCounter",countdown:!0})})}(window.jQuery);